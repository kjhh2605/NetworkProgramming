π€ Java μ†μΌ“ κΈ°λ° 2D κ²μ„ (1λ‹¨κ³„) μ¤ν™ λ¬Έμ„
1. ν”„λ΅μ νΈ κ°μ”
   ν”„λ΅μ νΈλ…: λ―Έλ‹ λ©”μ΄ν”μ¤ν† λ¦¬ ν”„λ΅ν† νƒ€μ…

λ©ν‘: Java μ†μΌ“ ν†µμ‹ μ„ μ΄μ©ν• λ‹¤μ¤‘ μ ‘μ† 2D MORPGμ κΈ°λ³Έ κΈ°λ¥ κµ¬ν„.

1λ‹¨κ³„ λ²”μ„: ν΄λΌμ΄μ–ΈνΈμ μΊλ¦­ν„° μ΄λ™ λ° μ„λ²„μ λ¬μ¤ν„° μƒμ„±/μ΄λ™ λ΅μ§ κµ¬ν„. λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄ μƒνƒκ°€ μ‹¤μ‹κ°„ λ™κΈ°ν™”λμ–΄μ•Ό ν•¨.

μ£Όμ” κΈ°μ :

μ„λ²„/ν΄λΌμ΄μ–ΈνΈ: Java

λ„¤νΈμ›ν‚Ή: Java Sockets (TCP/IP)

GUI (ν΄λΌμ΄μ–ΈνΈ): Java Swing

λ¦¬μ†μ¤: GIF (μ• λ‹λ©”μ΄μ…)

2. 1λ‹¨κ³„ κ°λ° λ²”μ„ (Scope)
   1λ‹¨κ³„μ—μ„λ” "λ•λ¦¬κ³  λ§λ”" λ΅μ§ μ—†μ΄, "μ΅΄μ¬ν•κ³  μ›€μ§μ΄λ”" κ²ƒμ—λ§ μ§‘μ¤‘ν•©λ‹λ‹¤.

β… In-Scope (κµ¬ν„ λ€μƒ)
μ„λ²„:

λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ ‘μ† μ²λ¦¬ (1ν΄λΌμ΄μ–ΈνΈ 1μ¤λ λ“ λλ” NIO).

μ£ΌκΈ°μ μΈ κ²μ„ λ£¨ν”„(Game Loop) μ‹¤ν–‰.

λ¬μ¤ν„° κ°μ²΄ μƒμ„± λ° λ§µ(νΉμ • μΆν‘)μ— λ°°μΉ.

λ¬μ¤ν„° μ΄λ™ λ΅μ§ (μ: λ‹¨μ μΆμ° λ°λ³µ μ΄λ™)μ„ μ„λ²„ κ²μ„ λ£¨ν”„μ—μ„ μ²λ¦¬.

λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² ν„μ¬ λ§µμ λ¨λ“  μƒνƒ (λ¨λ“  ν”λ μ΄μ–΄ μ„μΉ, λ¨λ“  λ¬μ¤ν„° μ„μΉ)λ¥Ό μ£ΌκΈ°μ μΌλ΅ λΈλ΅λ“μΊμ¤ν….

ν΄λΌμ΄μ–ΈνΈ:

μ„λ²„ μ ‘μ† κΈ°λ¥.

Swing JFrame λ° JPanelμ„ μ΄μ©ν• κ²μ„ μ°½ κµ¬ν„.

ν‚¤λ³΄λ“ μ…λ ¥ (KeyListener λλ” Key Bindings) κ°μ§€ (μΆ, μ°, μ ν”„).

μ…λ ¥μ— λ”°λΌ λ΅μ»¬ μΊλ¦­ν„°μ μƒνƒ (μΆν‘, λ°”λΌλ³΄λ” λ°©ν–¥) λ³€κ²½.

λ³€κ²½λ μΊλ¦­ν„° μƒνƒλ¥Ό μ¦‰μ‹ μ„λ²„λ΅ μ „μ†΅.

μ„λ²„λ΅λ¶€ν„° λ°›μ€ GAME_STATEλ¥Ό κΈ°λ°μΌλ΅ JPanelμ— λ¨λ“  μΊλ¦­ν„°μ™€ λ¬μ¤ν„° (GIF) λ λ”λ§.

β Out-of-Scope (λ‹¤μ λ‹¨κ³„)
κ³µκ²© (νμ •, λ°λ―Έμ§€ κ³„μ‚°)

λ¬μ¤ν„°/ν”λ μ΄μ–΄ HP

ν¬νƒμ„ μ΄μ©ν• λ§µ μ΄λ™ (1λ‹¨κ³„λ” λ‹¨μΌ λ§µ κ³ μ •)

μ±„ν… μ‹μ¤ν…

λ΅κ·ΈμΈ/κ³„μ • μ‹μ¤ν…

3. ν•µμ‹¬ κµ¬μ„± μ”μ†
   3.1. μ„λ²„ (Server)
   GameServer.java

ServerSocketμ„ μ—΄κ³  ν΄λΌμ΄μ–ΈνΈ μ ‘μ† λ€κΈ° (accept()).

μƒ ν΄λΌμ΄μ–ΈνΈ μ—°κ²° μ‹, λ³„λ„ μ¤λ λ“ (ClientHandler) μƒμ„± λ° ν• λ‹Ή.

ClientHandler.java (implements Runnable)

κ° ν΄λΌμ΄μ–ΈνΈμ™€ ν†µμ‹ (Input/Output Stream) λ‹΄λ‹Ή.

ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° PLAYER_UPDATE λ©”μ‹μ§€λ¥Ό μμ‹ .

μ„λ²„μ GameStateμ— ν•΄λ‹Ή ν΄λΌμ΄μ–ΈνΈμ μ„μΉ μ •λ³΄ μ—…λ°μ΄νΈ.

GameLoop.java (implements Runnable)

μ„λ²„μ λ©”μΈ λ΅μ§ μ¤λ λ“ (μ: 1μ΄μ— 60λ² update() νΈμ¶).

MonsterManagerμ λ¬μ¤ν„° μ΄λ™ λ΅μ§(monster.move()) νΈμ¶.

GameStateλ¥Ό JSON (λλ” μ§λ ¬ν™”λ κ°μ²΄)μΌλ΅ λ³€ν™.

λ¨λ“  ClientHandlerμ—κ² GAME_STATE λ©”μ‹μ§€ λΈλ΅λ“μΊμ¤ν….

GameState.java (Model)

λ¨λ“  ν”λ μ΄μ–΄ μ •λ³΄ (Map<String, Player>)

λ¨λ“  λ¬μ¤ν„° μ •λ³΄ (List<Monster>)

3.2. ν΄λΌμ΄μ–ΈνΈ (Client)
GameClient.java

μ„λ²„μ— Socket μ—°κ²°.

μ„λ²„λ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό μμ‹ ν•λ” λ³„λ„ μ¤λ λ“ (NetworkHandler) μ‹¤ν–‰.

GameFrame.java (extends JFrame)

λ©”μΈ μλ„μ°. GamePanelμ„ ν¬ν•¨.

GamePanel.java (extends JPanel)

μ‹¤μ  κ²μ„μ΄ κ·Έλ ¤μ§€λ” μΊ”λ²„μ¤.

paintComponent(Graphics g) λ©”μ„λ“λ¥Ό μ¤λ²„λΌμ΄λ“ν•μ—¬ λ λ”λ§.

ν‚¤λ³΄λ“ μ…λ ¥μ„ μ²λ¦¬ (KeyListener λλ” Key Bindings).

μ„λ²„λ΅λ¶€ν„° λ°›μ€ GameStateλ¥Ό μ €μ¥ν•  localGameState λ³€μ λ³΄μ .

NetworkHandler.java (implements Runnable)

μ„λ²„λ΅λ¶€ν„° GAME_STATE λ©”μ‹μ§€λ¥Ό μ§€μ†μ μΌλ΅ μμ‹ .

μμ‹ ν• λ°μ΄ν„°λ΅ GamePanelμ localGameStateλ¥Ό μ—…λ°μ΄νΈ.

GamePanel.repaint() νΈμ¶.

SpriteManager.java

GIF λ¦¬μ†μ¤λ¥Ό ImageIcon κ°μ²΄λ΅ λ―Έλ¦¬ λ΅λ“ν•μ—¬ κ΄€λ¦¬. (μ: new ImageIcon("monster.gif"))

4. ν•µμ‹¬ λ΅μ§ λ° ν†µμ‹  ν”„λ΅ν† μ½ (Protocol)
   μ΄ λ¶€λ¶„μ΄ λ™κΈ°ν™”μ ν•µμ‹¬μ…λ‹λ‹¤. μ„λ²„κ°€ λ¨λ“  μƒνƒλ¥Ό κ²°μ •ν•κ³ (Server-Authoritative) ν΄λΌμ΄μ–ΈνΈλ” κ·Έκ±Έ κ·Έλ¦¬κΈ°λ§ ν•λ” κ²ƒμ΄ κΈ°λ³Έμ…λ‹λ‹¤.

4.1. μ„λ²„ λ΅μ§ (λ¬μ¤ν„° μ΄λ™)
GameLoopκ°€ μ‹μ‘λ©λ‹λ‹¤.

MonsterManagerκ°€ "μ¬λΌμ„" 3λ§λ¦¬λ¥Ό (100, 200), (150, 200), (200, 200)μ— μƒμ„±ν•©λ‹λ‹¤.

GameLoopμ λ§¤ ν‹±(Tick)λ§λ‹¤:

"μ¬λΌμ„" κ°μ²΄μ update() λ©”μ„λ“κ°€ νΈμ¶λ©λ‹λ‹¤.

update() λ΅μ§: (μμ‹) "λ§μ•½ μ™Όμ½μΌλ΅ μ΄λ™ μ¤‘μ΄λ©΄ x -= 1. 3μ΄κ°€ μ§€λ‚¬μΌλ©΄ 'μ¤λ¥Έμ½ μ΄λ™' μƒνƒλ΅ λ³€κ²½."

GameLoopλ” λ¨λ“  λ¬μ¤ν„°μ™€ ν”λ μ΄μ–΄μ μµμΆ… μ„μΉλ¥Ό GAME_STATEλ΅ λ¬¶μ–΄ λΈλ΅λ“μΊμ¤ν…ν•©λ‹λ‹¤.

4.2. ν΄λΌμ΄μ–ΈνΈ λ΅μ§ (μΊλ¦­ν„° μ΄λ™)
μ‚¬μ©μκ°€ 'D' (μ¤λ¥Έμ½) ν‚¤λ¥Ό λ„λ¦…λ‹λ‹¤.

GamePanelμ KeyListenerκ°€ μ΄λ¥Ό κ°μ§€ν•©λ‹λ‹¤.

(μ¤‘μ”) ν΄λΌμ΄μ–ΈνΈλ” μ¦‰μ‹ μμ‹ μ λ΅μ»¬ μΊλ¦­ν„° μ„μΉλ¥Ό λ³€κ²½ν•©λ‹λ‹¤. (μ: myPlayer.x += 5). (μ΄λμ•Ό λ°μ‘μ„±μ΄ μΆ‹μµλ‹λ‹¤.)

λ™μ‹μ—, ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— PLAYER_UPDATE λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.

GamePanelμ€ repaint()λ¥Ό νΈμ¶ν•μ—¬ λ°©κΈ λ°”λ€ λ΅μ»¬ μ„μΉλ΅ μΊλ¦­ν„°λ¥Ό κ·Έλ¦½λ‹λ‹¤.

4.3. ν†µμ‹  ν”„λ΅ν† μ½ (JSON μμ‹)
κ°„λ‹¨ν• JSON λ¬Έμμ—΄ κΈ°λ° ν”„λ΅ν† μ½μ„ κ¶μ¥ν•©λ‹λ‹¤.

1. [C -> S] ν΄λΌμ΄μ–ΈνΈ μƒνƒ μ—…λ°μ΄νΈ (ν‚¤ μ…λ ¥ λ“± μ΄λ²¤νΈ λ°μƒ μ‹ μ „μ†΅)

JSON

{
"type": "PLAYER_UPDATE",
"payload": {
"x": 105,
"y": 300,
"state": "move", // "idle", "jump", "move"
"direction": "right" // "left", "right"
}
}
2. [S -> C] μ „μ²΄ κ²μ„ μƒνƒ λΈλ΅λ“μΊμ¤ν… (μ„λ²„κ°€ GameLoop ν‹±λ§λ‹¤ (μ: 1/60μ΄) λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅)

JSON

{
"type": "GAME_STATE",
"payload": {
"players": [
{ "id": "player_uuid_1", "x": 105, "y": 300, "state": "move", "direction": "right" },
{ "id": "player_uuid_2", "x": 500, "y": 300, "state": "idle", "direction": "left" }
],
"monsters": [
{ "id": "monster_1", "type": "slime", "x": 150, "y": 300, "state": "move", "direction": "left" },
{ "id": "monster_2", "type": "slime", "x": 180, "y": 300, "state": "move", "direction": "left" }
]
}
}
νλ¦„ μ”μ•½:

ν΄λΌμ΄μ–ΈνΈ(A)κ°€ 'D'ν‚¤λ¥Ό λ„λ¦„ -> λ΅μ»¬μ—μ„ (100, 300) -> (105, 300)μΌλ΅ μ΄λ™ λ° λ λ”λ§.

ν΄λΌμ΄μ–ΈνΈ(A)κ°€ μ„λ²„μ— PLAYER_UPDATE (105, 300) μ „μ†΅.

μ„λ²„κ°€ λ¬μ¤ν„°λ¥Ό (150, 300)μΌλ΅ μ΄λ™μ‹ν‚΄.

μ„λ²„κ°€ GAME_STATEλ¥Ό λ¨λ“  ν΄λΌμ΄μ–ΈνΈ(A, B)μ—κ² λΈλ΅λ“μΊμ¤ν…: { playerA: (105, 300), monster1: (150, 300) }

ν΄λΌμ΄μ–ΈνΈ(A)λ” μ΄ μ •λ³΄λ¥Ό λ°›κ³  μμ‹ μ μ„μΉλ¥Ό (105, 300)μΌλ΅ μ¬ν™•μΈ(λ³΄μ •)ν•κ³ , λ¬μ¤ν„°λ¥Ό (150, 300)μ— λ λ”λ§.

ν΄λΌμ΄μ–ΈνΈ(B)λ” μ΄ μ •λ³΄λ¥Ό λ°›κ³  playerAλ¥Ό (105, 300)μ—, λ¬μ¤ν„°λ¥Ό (150, 300)μ— λ λ”λ§. (λ™κΈ°ν™” μ™„λ£)